<!-- OTTIMIZZATO: Tutti i valori precomputati nel componente, eliminati pipe translate, concatenazioni stringa, accessi nested -->
<!-- DETAIL MODE: Versione per panel detail con nome completo e badge sotto l'icona -->
<div class="action_wrp">

    <div class="section">
        <div class="action-title">
            <div class="icon-action">
                <img class="active-icon" [src]="elementSrc" [title]="elementNameTitle">
                <!-- DETAIL MODE: Badge mostrato sotto l'icona, non nell'icona -->
            </div>
            <p class="label-action">{{elementNameTranslated}}</p>
            <!-- DETAIL MODE: Nome mostrato sempre (previewMode=false) -->
            <span *ngIf="showBadge" [class]="badgeClass">{{elementBadge}}</span>
            <span *ngIf="showBeta" class="trigger-beta-badge">Beta</span>
            <!-- DETAIL MODE: Drag button non mostrato (solo in preview mode) -->
        </div>

        
        <div *ngIf="showTip" class="action-description">
            <!-- FIX: Usa ng-container per raggruppare popover e anchor con la stessa condizione -->
            <!-- Questo assicura che la template reference variable sia disponibile quando satPopoverAnchor viene valutato -->
            <ng-container *ngIf="showTip && descriptionKey">
                <div [satPopoverAnchor]="descriptionTooltip"
                    (click)="descriptionTooltip.toggle()">
                    <span class="material-icons-outlined">info</span>
                </div>
                
                <sat-popover 
                    #descriptionTooltip 
                    id="descriptionTooltip" 
                    hasBackdrop 
                    verticalAlign="center" 
                    horizontalAlign="after" 
                    (backdropClicked)="descriptionTooltip.close()" 
                    panelClass="description-tooltip">
                    <div class="tooltip-wrp">
                        <div class="caret_tooltip"></div>
                        <span [innerHTML]="descriptionTranslated"></span>
                        <span *ngIf="showDocs" [innerHTML]="docUrlTranslated"></span>
                    </div>
                </sat-popover>
            </ng-container>
            <div [innerHtml]="tipText"></div>
        </div>

    </div>

    <!-- OTTIMIZZATO: showDeprecationMessage e deprecationMessageTranslated precomputati -->
    <div *ngIf="showDeprecationMessage" class="deprecation-message">{{deprecationMessageTranslated}}</div>

</div> 
