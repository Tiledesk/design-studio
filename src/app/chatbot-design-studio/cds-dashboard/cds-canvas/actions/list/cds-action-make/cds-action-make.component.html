<div *ngIf="previewMode" class="cds-action-preview">

    <div class="action-row-left">
       
        <span class="make-action-method" *ngIf="action.method">
            {{ action.method}}
        </span>

    </div>

    <div *ngIf="action.url" class="action-row-right">
        {{action.url}}
    </div>
    <div *ngIf="!action.url" class="action-row-right empty">
        Enter request URL
    </div>

    <div class="previewContent">
        
        <div class="icon-action">
            <img src="assets/images/icons/if_condition.svg">
        </div>

        <label class="title-preview-label">Success</label>
        
        <cds-connector class="connector-true"
            [idConnector] = "idConnectorTrue"
            [isConnected] = "isConnectedTrue">
        </cds-connector>
    </div>

    <hr class="preview-divider">

    <div class="previewContent">
       <label class="title-preview-label">else</label>
        <cds-connector class="connector-false"
            [idConnector] = "idConnectorFalse"
            [isConnected] = "isConnectedFalse">
        </cds-connector>
    </div>
</div>


<!-- Details -->
<div *ngIf="!previewMode" class="content-panel-intent-detail" #scrollMe id="scrollMe" >
    <div class="field-box">
        <label class="title-label">Make webhook url</label>
        <cds-textarea id="makeWebUrl" 
            [textLimitBtn]="false" 
            [emojiPikerBtn]="false" 
            [setAttributeBtn]="true"
            [minRow]="1" 
            [maxRow]="1" 
            [readonly]="false" 
            [text]="action.url"
            [placeholder]="'Enter Make Weebhook URL'"
            (changeTextarea)="onChangeTextarea($event, 'url')"
            (selectedAttribute)="onSelectedAttribute($event, 'url')">
        </cds-textarea>
    </div>

    <div class="field-box">
        <label class="title-label">Body parameters</label>
        <cds-attributes
            class="cds-attributes"
            [method]="typeMethodAttribute.INPUT"
            [attributes]="jsonParameters"
            (changeAttributes)="onChangeAttributes($event)">
        </cds-attributes>
    </div>

    <hr class="custom-divider">

    <div class="field-box">
        <div class="condition-container">
            <div class="icon-action">
                <img class="active-icon" src="assets/images/icons/if_condition.svg">
            </div>
            <span class="condition-text">Success</span>
        </div>
        <cds-select id="text-condition" 
            [items]="listOfIntents" 
            [bindLabelSelect]="'name'"
            [bindValueSelect]="'value'" 
            [itemSelected]="action?.trueIntent" 
            [placeholder]="'Select a block'"
            [clearable]="true" 
            (onSelected)="onChangeBlockSelect($event, 'trueIntent')"
            (onReset)="onResetBlockSelect($event, 'trueIntent')">
        </cds-select>
    </div>

    <div class="field-box">
        <div class="condition-container">
            <span class="condition-text">Else</span>
        </div>
        <cds-select id="text-condition" 
            [items]="listOfIntents" 
            [bindLabelSelect]="'name'"
            [bindValueSelect]="'value'" 
            [itemSelected]="action?.falseIntent" 
            [placeholder]="'Select a block'"
            [clearable]="true" 
            (onSelected)="onChangeBlockSelect($event, 'falseIntent')"
            (onReset)="onResetBlockSelect($event, 'falseIntent')">
        </cds-select>
    </div>

    <hr class="custom-divider">
    <mat-accordion>
    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false"
            class="custom-expansion-panel">
            <mat-expansion-panel-header class="disable_ripple">
                <mat-panel-title>
                    Advanced
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div>
<!--
    <div class="field-box">
        <label class="title-label"> Assign result to</label>
        <cds-textarea id="assignTo" 
            [textLimitBtn]="false" 
            [emojiPikerBtn]="false" 
            [setAttributeBtn]="true"
            [minRow]="1" 
            [maxRow]="1" 
            [readonly]="true" 
            [text]="action.assignResultTo"
            (selectedAttribute)="onSelectedAttribute($event, 'assignResultTo')"
            (clearSelectedAttribute)="onSelectedAttribute($event, 'assignResultTo')">
        </cds-textarea>
    </div>
-->
    <div class="field-box">
        <label class="title-label">Assign status to</label>
        <cds-textarea id="assignTo" 
            [textLimitBtn]="false" 
            [emojiPikerBtn]="false" 
            [setAttributeBtn]="true"
            [minRow]="1" 
            [maxRow]="1" 
            [readonly]="true" 
            [text]="action.assignStatusTo"
            (selectedAttribute)="onSelectedAttribute($event, 'assignStatusTo')"
            (clearSelectedAttribute)="onSelectedAttribute($event, 'assignStatusTo')">
        </cds-textarea>
    </div>


    <div class="field-box">
        <label class="title-label">Assign error to</label>
        <cds-textarea id="assignTo" 
            [textLimitBtn]="false"
            [emojiPikerBtn]="false" 
            [setAttributeBtn]="true"
            [minRow]="1" 
            [maxRow]="1" 
            [readonly]="true" 
            [text]="action.assignErrorTo"
            (selectedAttribute)="onSelectedAttribute($event, 'assignErrorTo')"
            (clearSelectedAttribute)="onSelectedAttribute($event, 'assignErrorTo')">
        </cds-textarea>
    </div>
</div>
</mat-expansion-panel>
</mat-accordion>
<hr class="custom-divider">
</div>